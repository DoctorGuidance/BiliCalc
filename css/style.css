/**
 * @file style.css
 * @description This file contains all the CSS styles for the Neonatal Bilirubin Calculator.
 * It is inspired by Apple's Human Interface Guidelines for a clean, modern look and feel.
 * The styling is organized into sections for variables, general resets, layout, and specific components.
 */

@import url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css');

/* --- CSS Variables and Root Configuration --- */
/* Defines the color palette, fonts, and other global style properties for the application. */
:root {
    --system-blue: #007aff;
    --system-gray-1: #f2f2f7;
    --system-gray-2: #e5e5ea;
    --system-gray-3: #d1d1d6;
    --system-gray-4: #c7c7cc;
    --system-gray-5: #aeaeb2;
    --system-gray-6: #8e8e93;

    --label-color: #000000;
    --secondary-label-color: rgba(60, 60, 67, 0.6);
    --tertiary-label-color: rgba(60, 60, 67, 0.3);

    --system-background: #f2f2f7;
    --secondary-system-background: #ffffff;

    --font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;
    --border-radius: 8px;

    --seafoam-green: #93E9BE;
    --seafoam-green-dark: #7acba1;
    --seafoam-green-light: #e9f9f1;
    --system-yellow-light: #fffbe6;
    --system-yellow-dark: #ffc107;
}

/* --- General Resets & Body Styling --- */
/* Basic styles to ensure consistent look and feel across browsers. */
body {
    font-family: var(--font-family);
    background-color: var(--system-background);
    color: var(--label-color);
    display: flex;
    justify-content: center;
    padding: 20px 10px 60px; /* Add space for fixed footer */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: "ss01";
    -webkit-font-feature-settings: "ss01";
    -moz-font-feature-settings: "ss01";
}

* {
    box-sizing: border-box;
}

/* --- Main Layout Structure --- */
/* Styles for the main containers that structure the page. */
.container {
    width: 100%;
    max-width: 420px;
    position: relative; /* Positioning context for the back button */
}

.back-button-wrapper {
    position: absolute;
    top: 5px;
    left: 5px;
    z-index: 10;
}

.back-button {
    font-size: 14px;
    font-weight: 500;
    color: var(--secondary-label-color);
    text-decoration: none;
    padding: 6px 10px;
    border-radius: 6px;
    transition: background-color 0.2s ease;
}

.back-button:hover {
    background-color: var(--system-gray-1);
}


.calculator-wrapper {
    background: var(--secondary-system-background);
    border-radius: 16px;
    padding: 20px;
}

/* --- Header & Title --- */
/* Styles for the main header, title, and subtitle of the calculator. */
.calculator-link {
    display: block;
    background-color: var(--system-yellow-light);
    border: 1px solid var(--system-yellow-dark);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    text-decoration: none;
    color: var(--label-color);
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.calculator-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
}

.calculator-link .box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.calculator-link .icon {
    font-size: 48px;
    line-height: 1;
}

.calculator-link h1 {
    font-size: 22px;
    font-weight: 700;
    margin: 0;
    color: var(--label-color);
}

@keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes sigma-gradient-animation {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.header-container {
    display: flex;
    justify-content: center;
    margin-bottom: 30px;
    margin-top: 10px; /* Add space for back button */
}

.unified-header {
    display: inline-block;
    animation: fadeInDown 0.8s ease-out, sigma-gradient-animation 12s ease infinite;
    background: linear-gradient(-45deg, #2c3e50, #00796b, #93E9BE, #0277BD);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-align: right;
}

.calculator-title {
    font-size: 36px;
    font-weight: 800;
    margin-bottom: 0;
}

.subtitle-wrapper {
    margin-top: -8px;
}

.subtitle-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    text-decoration: none;
    color: inherit;
}

.profile-pic {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    object-fit: cover;
    position: relative;
    top: -2px;
}

.subtitle {
    font-size: 13px;
    font-weight: 500;
    background: none;
    text-shadow: none;
}

.subtitle-link:hover {
    /* No hover effect */
}

/* --- Form Sections & Inputs --- */
/* General styling for form sections and specific input fields like the bilirubin level. */
.form-section {
    margin-bottom: 24px;
}

/* Bilirubin Input Redesign */
.bilirubin-section .form-label {
    text-align: center;
    margin-bottom: 12px;
}

.bilirubin-input-wrapper {
    display: flex;
    justify-content: center;
}

#bilirubin-input.form-control {
    width: 120px;
    height: 120px;
    font-size: 48px;
    font-weight: 700;
    text-align: center;
    border-radius: 24px;
    padding: 0;
    background-color: var(--system-yellow-light);
    border-color: var(--system-yellow-dark);
}

#bilirubin-input.form-control::placeholder {
    color: var(--system-gray-4);
    opacity: 1;
}

.form-label {
    display: block;
    font-size: 17px;
    font-weight: 400;
    margin-bottom: 8px;
    padding-right: 4px;
}

#age-label {
    color: var(--secondary-label-color);
}

/* --- General Input Field Design --- */
/* Styles for the rows and containers that hold standard input fields. */
.input-row {
    display: flex;
    gap: 12px;
    background-color: var(--secondary-system-background);
    border-radius: 12px;
    padding: 10px;
    box-shadow: 0 4px 16px rgba(147, 233, 190, 0.4); /* Faint teal shadow */
    transition: box-shadow 0.2s ease;
}
.input-row:focus-within {
    box-shadow: 0 4px 20px rgba(147, 233, 190, 0.6);
}

.input-container {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.input-container .form-label {
    font-size: 14px;
    font-weight: 500;
    color: var(--secondary-label-color);
    padding-right: 2px;
    margin-bottom: 6px;
}

.input-wrapper {
    position: relative;
    width: 100%;
    display: flex;
}

.input-icon {
    position: absolute;
    left: 12px; /* Reverted to left */
    top: 50%;
    transform: translateY(-50%);
    color: var(--system-gray-4);
    pointer-events: none; /* Let clicks pass through to the input */
}

.form-control {
    width: 100%;
    height: 48px; /* Explicit height for consistency */
    padding: 12px 16px 12px 40px; /* Reverted padding for icon on the left */
    border: 1px solid var(--system-gray-2);
    border-radius: var(--border-radius);
    font-size: 17px;
    font-family: inherit;
    background-color: white;
    color: var(--label-color);
    -webkit-appearance: none;
    transition: border-color 0.2s ease;
}
.form-control:focus {
    outline: none;
    border-color: var(--seafoam-green-dark);
    box-shadow: none; /* Remove default focus glow */
}

.form-control.hour-input {
    flex-basis: 100px;
    text-align: center;
    margin-right: auto; /* Pushes the element to the left in RTL flex container */
    /* padding is inherited, which is correct for an icon on the right */
}

.form-control-static {
    position: relative;
    padding: 12px 16px;
    background-color: var(--system-gray-1);
    border-radius: var(--border-radius);
    font-size: 17px;
    font-weight: 600;
    color: var(--secondary-label-color);
    text-align: center;
}

.age-hour {
    position: absolute;
    top: 6px;
    left: 10px;
    font-size: 11px;
    font-weight: 700;
    color: var(--tertiary-label-color);
}

/* --- Segmented Control (Gestational Age) --- */
/* Styles for the button-based segmented control used for selecting gestational age. */
.segmented-control {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
    gap: 8px;
}

.segmented-control button {
    all: unset;
    box-sizing: border-box;
    padding: 10px 5px;
    text-align: center;
    font-size: 15px;
    font-weight: 600;
    border-radius: var(--border-radius);
    cursor: pointer;
    background-color: var(--system-gray-1);
    color: var(--label-color);
    border: 1px solid var(--system-gray-2);
    transition: all 0.2s ease-in-out;
}

.segmented-control button:hover {
    border-color: var(--system-gray-4);
}

.segmented-control button.active {
    background-color: var(--system-blue);
    color: white;
    border-color: var(--system-blue);
    box-shadow: 0 4px 12px rgba(0, 122, 255, 0.25);
    transform: translateY(-2px);
}

/* --- Checkboxes & Collapsible Sections --- */
/* Styles for custom checkboxes and the animated sections that they can reveal. */
.checkbox-label {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    font-size: 17px;
    padding: 8px 0;
}
input[type="checkbox"] {
    -webkit-appearance: none;
    appearance: none;
    background-color: var(--secondary-system-background);
    margin: 0;
    font: inherit;
    color: currentColor;
    width: 22px;
    height: 22px;
    border: 1px solid var(--system-gray-4);
    border-radius: 6px;
    transform: translateY(-0.075em);
    display: grid;
    place-content: center;
}
input[type="checkbox"]::before {
    content: "";
    width: 14px;
    height: 14px;
    transform: scale(0);
    transition: 120ms transform ease-in-out;
    box-shadow: inset 1em 1em var(--system-blue);
    background-color: var(--system-blue);
    clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
}
input[type="checkbox"]:checked::before {
    transform: scale(1);
}
input[type="checkbox"]:checked {
    border-color: var(--system-blue);
}

.optional-section-animated {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-out, margin-top 0.4s ease-out;
}
.optional-section-animated.visible {
    max-height: 100px;
    margin-top: 8px;
}

/* --- Results Display --- */
/* Styles for the area where the calculated results and recommendations are displayed. */
.result-area {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid var(--system-gray-2);
    text-align: center;
}

.results-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--secondary-label-color);
    margin-bottom: 16px;
    text-align: right;
}

.results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 12px;
    margin-bottom: 20px;
}

.result-card {
    background-color: #fff;
    border-radius: 12px;
    padding: 16px 12px;
    text-align: center;
    border: 1px solid var(--system-gray-2);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.result-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.result-card-icon-wrapper {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 12px;
}
.result-card-icon-wrapper svg {
    width: 22px;
    height: 22px;
}

.icon-phototherapy { background-color: #fffbe6; color: #ffc107; }
.icon-escalation { background-color: #fdeee0; color: #ff5722; }
.icon-exchange { background-color: #fde7e9; color: #f44336; }


.result-card-content {
    line-height: 1.3;
}

.result-card-value {
    display: block;
    font-size: 24px;
    font-weight: 700;
    color: var(--label-color);
    margin-bottom: 2px;
}

.result-card-label {
    font-size: 13px;
    color: var(--secondary-label-color);
    white-space: nowrap;
}

.recommendation {
    padding: 12px 16px;
    border-radius: var(--border-radius);
    font-weight: 500;
    font-size: 16px;
    margin-top: 16px;
    transition: background-color 0.3s ease;
    text-align: right;
}

.recommendation-title {
    font-weight: 700;
    margin-bottom: 8px;
}

.recommendation-detail {
    font-size: 14px;
    line-height: 1.5;
}

.recommendation-list {
    font-size: 14px;
    padding-right: 20px;
    margin-top: 8px;
    margin-bottom: 0;
    line-height: 1.6;
}

.symptoms-list {
    font-size: 13px;
    color: var(--secondary-label-color);
    padding-right: 45px; /* Indent from the right, aligned with checkbox */
    margin-top: 4px;
    margin-bottom: 0;
    line-height: 1.6;
    list-style-type: '•  '; /* Custom bullet point */
}

.recommendation.high-risk { background-color: #fde7e9; color: #c51123; }
.recommendation.medium-risk { background-color: #fdeee0; color: #c04812; }
.recommendation.low-risk { background-color: var(--seafoam-green-light); color: #2e7d32; }
.recommendation.no-risk { background-color: var(--system-gray-1); color: var(--secondary-label-color); }

.kernicterus-section {
    margin-top: -12px; /* Pulls the section up closer to the one above */
}

/* --- Third-Party Component Customization --- */
/* Overrides and styles for the persian-datepicker-element component to match the app's theme. */
.input-wrapper persian-datepicker-element {
    width: 100%;
    height: 48px; /* Match form-control height */
    --jdp-font-family: var(--font-family);
    --jdp-border-radius: var(--border-radius);
    --jdp-primary: var(--system-blue);
    --jdp-input-color: var(--label-color);
    --jdp-font-size: 17px;

    /* Style internal input to match .form-control */
    --jdp-input-bg: white;
    --jdp-input-border: 1px solid var(--system-gray-2);
    --jdp-input-padding: 12px 16px 12px 40px; /* Reverted for icon on the left */
    --jdp-input-focus-border-color: var(--seafoam-green-dark);
    --jdp-input-focus-ring-color: transparent; /* Disable default focus ring */
}

input {
    font-family: var(--font-family);
}

.disclaimer-footer {
    padding: 15px;
    margin-top: 20px;
    text-align: center;
    font-size: 13px;
    color: var(--secondary-label-color);
    line-height: 1.6;
    background-color: var(--system-gray-1);
    border-radius: 12px;
}

.disclaimer-footer strong {
    font-weight: 600;
    color: var(--label-color);
}


/* --- Footer & Disclaimer --- */
/* Styles for the disclaimer and the fixed app version footer. */
.app-footer {
    position: fixed;
    bottom: 10px;
    right: 10px;
    background-color: var(--system-gray-2);
    padding: 5px 10px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 500;
    color: var(--secondary-label-color);
    z-index: 1000;
}